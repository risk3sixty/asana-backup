{"version":3,"sources":["../src/asanaBackup.ts"],"names":[],"mappings":"","file":"asanaBackup.d.ts","sourcesContent":["require('dotenv').config()\n\nimport minimist from 'minimist'\nimport { v4 as uuidv4 } from 'uuid'\nimport { uploadObject } from './libs/aws'\nimport Asana from './libs/asana'\n\n// const argv = minimist(process.argv.slice(2))\n;(async function asanaBackup() {\n  try {\n    const backupInstancePrefix = `${Date.now()}__${uuidv4()}`\n    const fullPrefixBase = [\n      process.env.AWS_S3_PREFIX || 'asana-backup',\n      backupInstancePrefix,\n    ]\n    const asana = Asana()\n    const workspaces = await asana.getWorkspaces()\n    const r3sWs = workspaces.find((w: any) => w.name == 'risk3sixty.com')\n    const exportRes = await asana.getFullExport(r3sWs.gid)\n    // await zendesk.getArticles(async function processArticle(\n    //   article: any,\n    //   ind: number\n    // ) {\n    //   const filePathInBucket = [\n    //     ...fullPrefixBase,\n    //     `${ind}__${article.title}.json`,\n    //   ]\n    //   await uploadObject(filePathInBucket.join('/'), JSON.stringify(article))\n    // })\n\n    console.log(`Successfully saved your asana org`, exportRes)\n    // console.log(`s3://${process.env.AWS_S3_BUCKET}/${fullPrefixBase.join('/')}`)\n  } catch (err) {\n    console.error(\n      `Error processing knowledge base`,\n      err,\n      (err as any).response.data\n    )\n  } finally {\n    process.exit()\n  }\n})()\n"]}